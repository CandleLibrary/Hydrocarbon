<http>

    <head>
    	<meta charset="utf8">
        <script src="/cfw/wick"></script>
    </head>

    <body>
        <div id="main"></div>
        <template id="template">
            <scope>
                <textarea value=((value)())></textarea>
                <textarea value=((js_output))></textarea>
                <div>((table_output))</div>
                <script on=((value))>
					try{
						env.table = {};
						let result = js_base(whind(value), env);
						console.log(result[0]);
						emit("js_output",JSON.stringify(result[0]));
						table_output = JSON.stringify(env.table);
					}catch(e){
						emit.js_output = (e + "");
					}
				</script>
            </scope>
        </template>
        <script type="module">
			
			(async ()=> {
				const presets = wick.presets({
					custom : {
						env : {macho:"test"}, 
						js_base : {test:true}
					}
				});

				(await wick(document.getElementById("template"), presets)).mount(document.getElementById("main"));
			})();
		</script>
    </body>
</http>
